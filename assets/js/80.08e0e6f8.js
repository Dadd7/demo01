(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{672:function(x,t,a){"use strict";a.r(t);var v=a(6),e=Object(v.a)({},(function(){var x=this,t=x.$createElement,a=x._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":x.$parent.slotKey}},[a("h2",{attrs:{id:"分区基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分区基础知识"}},[x._v("#")]),x._v(" 分区基础知识")]),x._v(" "),a("table",[a("thead",[a("tr",[a("th",[x._v("mbr分区")]),x._v(" "),a("th",[x._v("gtp分区")])])]),x._v(" "),a("tbody",[a("tr",[a("td",[x._v("最多支持四个主分区")]),x._v(" "),a("td",[x._v("支持无限多个主分区（但操作系统可能限制，windows最多128个分区）")])]),x._v(" "),a("tr",[a("td",[x._v("系统只能安装在主分区")]),x._v(" "),a("td",[x._v("最大支持18EB的大容量（1EB=1024PB，1PB=1024TB）")])]),x._v(" "),a("tr",[a("td",[x._v("扩展分区要占一个主分区")]),x._v(" "),a("td",[x._v("Windows7 64位以后支持gtp")])]),x._v(" "),a("tr",[a("td",[x._v("MBR最大只支持2TB，但拥有更好的兼容性")]),x._v(" "),a("td")])])]),x._v(" "),a("h2",{attrs:{id:"linux分区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux分区"}},[x._v("#")]),x._v(" Linux分区")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("原理介绍")]),x._v(" "),a("p",[x._v("Linux来说，无论有几个分区，分给哪一目录使用，它归根到底就只有一个根目录，一个独立且唯一的文件，Linux中每个文件都是用来组成整个文件系统的一部分")]),x._v(" "),a("p",[x._v("Linux采用了一种叫“载入”的处理方式，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来，这时要载入的一个分区将使它的存储空间在一个目录下获得")])]),x._v(" "),a("li",[a("p",[x._v("硬盘说明")]),x._v(" "),a("p",[x._v("Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘")]),x._v(" "),a("p",[x._v("对于IDE硬盘，驱动器标识符为“hdx~”，其中“hd”表明分区所在设备的类型，这里是指IDE硬盘了，“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘），“~”代表分区，前四个分区用数组1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，hda3表示为第一个IDE硬盘上的第三个主分区或扩展分区")]),x._v(" "),a("p",[x._v("对于SCSI硬盘则标识为“sdx~”，SCSI硬盘是用“sd”来标识分区所在设备的类型的，其余则和IDE硬盘的表示方法一样")])]),x._v(" "),a("li",[a("p",[x._v("使用"),a("code",[x._v("lsblk")]),x._v("指令查看当前系统的分区情况")]),x._v(" "),a("p",[a("code",[x._v("FSTYPE")]),x._v(" 分区情况；"),a("code",[x._v("LABEL")]),x._v(" 分区类型；"),a("code",[x._v("UUID")]),x._v(" 唯一标识分区的40位不重复的字符串；"),a("code",[x._v("MOUNTPOINT")]),x._v("挂载点")]),x._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("[root@hadoop1 ~]# lsblk -f\nNAME\tFSTYPE LABEL UUID\t\t\t\t\t\t\t MOUNTPOINT\nsr0\nsda\n├─sda1 ext4\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /boot\n├─sda2 swap\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx [swap]\n└─sda3 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /\n[root@hadoop1 ~]# lsblk\nNAME\tMAJ:MIN\t RM\t   SIZE RO\tTYPE  MOUNTPOINT\nsr0\t\t 11:0 \t  1\t  1024M  0  rom\nsda\t\t  8:0\t  0     20G  0  disk\n├─sda1\t  8:1  \t  0    200M  0  part  /boot\n├─sda2\t  8:2     0      2G  0  part  [SWAP]\n└─sda3    8:3     0   17.8G  0  part  /\n")])])])])]),x._v(" "),a("h2",{attrs:{id:"增加一块硬盘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增加一块硬盘"}},[x._v("#")]),x._v(" 增加一块硬盘")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("点击WMware左上角【虚拟机】，点击【设置】")])]),x._v(" "),a("li",[a("p",[x._v("来到【虚拟机设置】窗口，点击下方的【添加】")])]),x._v(" "),a("li",[a("p",[x._v("选择【硬盘】，点击【下一步】")])]),x._v(" "),a("li",[a("p",[x._v("虚拟磁盘类型选择【SCSI(S)】，点击【下一步】")])]),x._v(" "),a("li",[a("p",[x._v("选择【创建新虚拟磁盘】，点击【下一步】")])]),x._v(" "),a("li",[a("p",[x._v("最大磁盘大小【2G】(随意)，选择【将虚拟磁盘拆分成多个文件(M)】，点击【下一步】")])]),x._v(" "),a("li",[a("p",[x._v("文件名【atguiguCentOS-0.vmdk】，这个名字应该是啥就让是啥就行，点击【完成】")])]),x._v(" "),a("li",[a("p",[x._v("又回到虚拟机设置窗口，点击【确定】")])]),x._v(" "),a("li",[a("p",[x._v("终端输入【"),a("code",[x._v("lsblk")]),x._v("】看不到新磁盘sdb1，是因为需要重启才行")])]),x._v(" "),a("li",[a("p",[x._v("重启后，在终端【"),a("code",[x._v("lsblk -f")]),x._v("】，发现有这个硬盘了，就是没有分区和格式化")]),x._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("[root@hadoop1 ~]# lsblk -f\nNAME\tFSTYPE LABEL UUID\t\t\t\t\t\t\t MOUNTPOINT\nsr0\nsda\n├─sda1 ext4\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /boot\n├─sda2 swap\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx [swap]\n└─sda3 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /\nsdb1\n")])])])])]),x._v(" "),a("h2",{attrs:{id:"分区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分区"}},[x._v("#")]),x._v(" 分区")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("终端输入【"),a("code",[x._v("fdisk /dev/sdb")]),x._v("】回车，出现【"),a("code",[x._v("Command <m for help>:")]),x._v("】你需要什么帮助")])]),x._v(" "),a("li",[a("p",[x._v("在帮助后面输入【"),a("code",[x._v("m")]),x._v("】，看到了【"),a("code",[x._v("n add a new partition")]),x._v("】【"),a("code",[x._v("w write table to disk and exit")]),x._v("】，输入【"),a("code",[x._v("n")]),x._v("】")])]),x._v(" "),a("li",[a("p",[x._v("出现【"),a("code",[x._v("p primary partition(1-4)")]),x._v("】，输入【"),a("code",[x._v("p")]),x._v("】")])]),x._v(" "),a("li",[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("Partition number (1-4): 1\nFirst cylinder (1-261, default 1):\nUsing default value 1\nLast cylinder, +cylinders or +size{k,M,G} (1-261, default 261):\nUsing default value 261\n\nCommand <m for help>: w\n")])])])]),x._v(" "),a("li",[a("p",[x._v("再看分区")]),x._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("[root@hadoop1 ~]# lsblk -f\nNAME\tFSTYPE LABEL UUID\t\t\t\t\t\t\t MOUNTPOINT\nsr0\nsda\n├─sda1 ext4\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /boot\n├─sda2 swap\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx [swap]\n└─sda3 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /\nsdb\n└─sdb1\n")])])])])]),x._v(" "),a("h2",{attrs:{id:"格式化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式化"}},[x._v("#")]),x._v(" 格式化")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("输入【"),a("code",[x._v("mkfs -t ext4 /dev/sdb1")]),x._v("】，回车，就成功了")])]),x._v(" "),a("li",[a("p",[x._v("再看分区，这个磁盘就可以用了")]),x._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("[root@hadoop1 ~]# lsblk -f\nNAME\tFSTYPE LABEL UUID\t\t\t\t\t\t\t MOUNTPOINT\nsr0\nsda\n├─sda1 ext4\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /boot\n├─sda2 swap\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx [swap]\n└─sda3 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /\nsdb\n└─sdb1 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx \n")])])])])]),x._v(" "),a("h2",{attrs:{id:"挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载"}},[x._v("#")]),x._v(" 挂载")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("需要挂在到newdisk，先创建newdisk【"),a("code",[x._v("mkdir /home/newdisk")]),x._v("】")])]),x._v(" "),a("li",[a("p",[x._v("挂载【"),a("code",[x._v("[root@hadoop1 home]# mount /dev/sdb1 /home/newdisk")]),x._v("】")])]),x._v(" "),a("li",[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("[root@hadoop1 ~]# lsblk -f\nNAME\tFSTYPE LABEL UUID\t\t\t\t\t\t\t MOUNTPOINT\nsr0\nsda\n├─sda1 ext4\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /boot\n├─sda2 swap\t\txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx [swap]\n└─sda3 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /\nsdb\n└─sdb1 ext4 \txxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx /home/newdisk\n")])])])]),x._v(" "),a("li",[a("p",[x._v("这时临时挂载，重启后，这种挂载联系就没了，如果想一直保持联系，需要设置自动挂载")])])]),x._v(" "),a("h2",{attrs:{id:"自动挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动挂载"}},[x._v("#")]),x._v(" 自动挂载")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("打开【"),a("code",[x._v("vim /etc/fstab")]),x._v("】")])]),x._v(" "),a("li",[a("p",[x._v("写入挂【"),a("code",[x._v("/dev/sdb1 /home/newdisk ext4 defaults 0 0")]),x._v("】，保存")]),x._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("#\n# /etc/fstab\n# Created by anaconda on Sat Mar 17 21:07:00 2018\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n#\n/dev/sdb1                                /home/newdisk     ext4  defaults  0 0\n...\n")])])])]),x._v(" "),a("li",[a("p",[x._v("写【"),a("code",[x._v("[root@hadoop1 home]# mount -a")]),x._v("】让挂载生效")])]),x._v(" "),a("li",[a("p",[x._v("【"),a("code",[x._v("reboot")]),x._v("】重启")])]),x._v(" "),a("li",[a("p",[x._v("要是取消挂载，就【"),a("code",[x._v("umount /dev/sdb1")]),x._v("】")])])]),x._v(" "),a("h2",{attrs:{id:"磁盘情况查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘情况查询"}},[x._v("#")]),x._v(" 磁盘情况查询")]),x._v(" "),a("ol",[a("li",[a("p",[x._v("【"),a("code",[x._v("df -h")]),x._v("】查询系统整体磁盘使用情况")])]),x._v(" "),a("li",[a("p",[x._v("【"),a("code",[x._v("du-h /目录")]),x._v("】查询指定目录的磁盘占用情况")]),x._v(" "),a("p",[x._v("查询指定目录的磁盘占用情况，默认为当前目录")]),x._v(" "),a("p",[a("code",[x._v("-s")]),x._v(" 指定目录占用大小总汇；"),a("code",[x._v("-h")]),x._v(" 带计量单位；"),a("code",[x._v("-a")]),x._v(" 含文件；")]),x._v(" "),a("p",[a("code",[x._v("--max-depth=1")]),x._v(" 子目录深度; "),a("code",[x._v("-c")]),x._v(" 列出明细的同时，增加汇总值")]),x._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[x._v("//查询/opt目录的磁盘占用情况，深度为1\n[root@hadoop1 home]# du -ach --max-depth=1 /opt\n")])])])]),x._v(" "),a("li",[a("p",[x._v("工作实用指令")]),x._v(" "),a("p",[x._v("【"),a("code",[x._v('ls -l /home | grep "^-" | wc -l')]),x._v("】统计/home文件夹下文件的个数")]),x._v(" "),a("p",[x._v("【"),a("code",[x._v('ls -l /home | grep "^d" | wc -l')]),x._v("】统计/home文件夹下目录的个数")]),x._v(" "),a("p",[x._v("【"),a("code",[x._v('ls -lR /home | grep "^-" | wc -l')]),x._v("】统计/home文件夹下文件的个数，包括子文件夹里的")]),x._v(" "),a("p",[x._v("【"),a("code",[x._v('ls -lR /home | grep "^d" | wc -l')]),x._v("】统计/home文件夹下目录的个数，包括子文件夹里的")]),x._v(" "),a("p",[x._v("【"),a("code",[x._v("tree")]),x._v("】以数状显示目录结构 (需要先安装"),a("code",[x._v("yum instal tree")]),x._v(")")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);