<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>反射 | 大段的小站</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/img//favicon.ico">
    <meta name="description" content="">
    <meta name="author" content="大段">
    <meta name="keywords" content="小网站">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.6bc701c2.css" as="style"><link rel="preload" href="/assets/js/app.23e0e97d.js" as="script"><link rel="preload" href="/assets/js/3.4591a7e0.js" as="script"><link rel="preload" href="/assets/js/1.d6c07a46.js" as="script"><link rel="preload" href="/assets/js/97.67316cf8.js" as="script"><link rel="prefetch" href="/assets/js/10.59f3c7a6.js"><link rel="prefetch" href="/assets/js/100.b7bc10e0.js"><link rel="prefetch" href="/assets/js/101.6079a545.js"><link rel="prefetch" href="/assets/js/102.f202b290.js"><link rel="prefetch" href="/assets/js/103.c266da3b.js"><link rel="prefetch" href="/assets/js/104.89dfcdff.js"><link rel="prefetch" href="/assets/js/105.eb374e90.js"><link rel="prefetch" href="/assets/js/106.1588dfa6.js"><link rel="prefetch" href="/assets/js/107.a2d05230.js"><link rel="prefetch" href="/assets/js/108.82e2e1aa.js"><link rel="prefetch" href="/assets/js/109.5a880b25.js"><link rel="prefetch" href="/assets/js/11.f89b210a.js"><link rel="prefetch" href="/assets/js/110.bc9c6df7.js"><link rel="prefetch" href="/assets/js/111.6c248db2.js"><link rel="prefetch" href="/assets/js/112.0c6ec4df.js"><link rel="prefetch" href="/assets/js/12.c5757bfe.js"><link rel="prefetch" href="/assets/js/13.4588e2d2.js"><link rel="prefetch" href="/assets/js/14.6202975c.js"><link rel="prefetch" href="/assets/js/15.6e492e4d.js"><link rel="prefetch" href="/assets/js/16.aee4eb52.js"><link rel="prefetch" href="/assets/js/17.03cd738f.js"><link rel="prefetch" href="/assets/js/18.ee3299b0.js"><link rel="prefetch" href="/assets/js/19.6cd1ef01.js"><link rel="prefetch" href="/assets/js/20.c27cb218.js"><link rel="prefetch" href="/assets/js/21.502dff6e.js"><link rel="prefetch" href="/assets/js/22.e9661d28.js"><link rel="prefetch" href="/assets/js/23.d674874c.js"><link rel="prefetch" href="/assets/js/24.c9eb293e.js"><link rel="prefetch" href="/assets/js/25.dd0a5bb3.js"><link rel="prefetch" href="/assets/js/26.60602913.js"><link rel="prefetch" href="/assets/js/27.496fc15c.js"><link rel="prefetch" href="/assets/js/28.37ec62fe.js"><link rel="prefetch" href="/assets/js/29.c8b05424.js"><link rel="prefetch" href="/assets/js/30.09a71f25.js"><link rel="prefetch" href="/assets/js/31.b2855c12.js"><link rel="prefetch" href="/assets/js/32.ee797bc2.js"><link rel="prefetch" href="/assets/js/33.c6a28b01.js"><link rel="prefetch" href="/assets/js/34.66112427.js"><link rel="prefetch" href="/assets/js/35.559e35d7.js"><link rel="prefetch" href="/assets/js/36.6e025f2f.js"><link rel="prefetch" href="/assets/js/37.a9d3a06e.js"><link rel="prefetch" href="/assets/js/38.961b20ac.js"><link rel="prefetch" href="/assets/js/39.bdbc2701.js"><link rel="prefetch" href="/assets/js/4.eb3e360c.js"><link rel="prefetch" href="/assets/js/40.ad136a67.js"><link rel="prefetch" href="/assets/js/41.b42102e5.js"><link rel="prefetch" href="/assets/js/42.0c388335.js"><link rel="prefetch" href="/assets/js/43.c23e48f9.js"><link rel="prefetch" href="/assets/js/44.b6dfb2ab.js"><link rel="prefetch" href="/assets/js/45.91c6b905.js"><link rel="prefetch" href="/assets/js/46.d3f5680e.js"><link rel="prefetch" href="/assets/js/47.5d9e6e94.js"><link rel="prefetch" href="/assets/js/48.231b3512.js"><link rel="prefetch" href="/assets/js/49.dc806349.js"><link rel="prefetch" href="/assets/js/5.32c9c2d6.js"><link rel="prefetch" href="/assets/js/50.2c2d9a22.js"><link rel="prefetch" href="/assets/js/51.1b6484ba.js"><link rel="prefetch" href="/assets/js/52.de309f23.js"><link rel="prefetch" href="/assets/js/53.3504ae10.js"><link rel="prefetch" href="/assets/js/54.17d9b28c.js"><link rel="prefetch" href="/assets/js/55.60bbec06.js"><link rel="prefetch" href="/assets/js/56.dac00a59.js"><link rel="prefetch" href="/assets/js/57.e800ff18.js"><link rel="prefetch" href="/assets/js/58.dbbcffcb.js"><link rel="prefetch" href="/assets/js/59.b29d3c43.js"><link rel="prefetch" href="/assets/js/6.04ca2e73.js"><link rel="prefetch" href="/assets/js/60.32c5078f.js"><link rel="prefetch" href="/assets/js/61.34fb28b7.js"><link rel="prefetch" href="/assets/js/62.bb4caafc.js"><link rel="prefetch" href="/assets/js/63.2dcfbb49.js"><link rel="prefetch" href="/assets/js/64.9d5e9a1e.js"><link rel="prefetch" href="/assets/js/65.711d96e5.js"><link rel="prefetch" href="/assets/js/66.781b566e.js"><link rel="prefetch" href="/assets/js/67.a539d279.js"><link rel="prefetch" href="/assets/js/68.16554763.js"><link rel="prefetch" href="/assets/js/69.0599f3fc.js"><link rel="prefetch" href="/assets/js/7.68056e46.js"><link rel="prefetch" href="/assets/js/70.25e12a6e.js"><link rel="prefetch" href="/assets/js/71.b9c73c7d.js"><link rel="prefetch" href="/assets/js/72.fc44e82f.js"><link rel="prefetch" href="/assets/js/73.5352b490.js"><link rel="prefetch" href="/assets/js/74.250d8a5c.js"><link rel="prefetch" href="/assets/js/75.d8d85b7c.js"><link rel="prefetch" href="/assets/js/76.54c358ad.js"><link rel="prefetch" href="/assets/js/77.6ea55670.js"><link rel="prefetch" href="/assets/js/78.68931fa8.js"><link rel="prefetch" href="/assets/js/79.55075af8.js"><link rel="prefetch" href="/assets/js/8.a51baa3e.js"><link rel="prefetch" href="/assets/js/80.08e0e6f8.js"><link rel="prefetch" href="/assets/js/81.cf2c36c1.js"><link rel="prefetch" href="/assets/js/82.1c3d98f1.js"><link rel="prefetch" href="/assets/js/83.8cc6235e.js"><link rel="prefetch" href="/assets/js/84.a8d42e96.js"><link rel="prefetch" href="/assets/js/85.70dc3c59.js"><link rel="prefetch" href="/assets/js/86.865a17cb.js"><link rel="prefetch" href="/assets/js/87.efe14f77.js"><link rel="prefetch" href="/assets/js/88.e522b67b.js"><link rel="prefetch" href="/assets/js/89.d5566bb3.js"><link rel="prefetch" href="/assets/js/9.644440be.js"><link rel="prefetch" href="/assets/js/90.b0a459e5.js"><link rel="prefetch" href="/assets/js/91.830c056f.js"><link rel="prefetch" href="/assets/js/92.cc8460f2.js"><link rel="prefetch" href="/assets/js/93.47e3f577.js"><link rel="prefetch" href="/assets/js/94.c01ea03a.js"><link rel="prefetch" href="/assets/js/95.9baaa853.js"><link rel="prefetch" href="/assets/js/96.5a441f7c.js"><link rel="prefetch" href="/assets/js/98.0fccba07.js"><link rel="prefetch" href="/assets/js/99.4afa1a43.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6bc701c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>大段的小站</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>大段</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img//mine.jpg" alt="大段的小站" class="logo"> <span class="site-name">大段的小站</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-blog"></i>
  笔记
</a></div><div class="nav-item"><a href="/myPages/myDiary/2023.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  日记
</a></div><div class="nav-item"><a href="/categories/玩意/" class="nav-link"><i class="iconfont reco-other"></i>
  玩意
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/assets/img//mine.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    大段
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>98</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>9</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-blog"></i>
  笔记
</a></div><div class="nav-item"><a href="/myPages/myDiary/2023.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  日记
</a></div><div class="nav-item"><a href="/categories/玩意/" class="nav-link"><i class="iconfont reco-other"></i>
  玩意
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myPages/myNote/01java/02-Coll.html" class="sidebar-link">集合</a></li><li><a href="/myPages/myNote/01java/03-Ref.html" aria-current="page" class="active sidebar-link">反射</a></li><li><a href="/myPages/myNote/01java/01-io.html" class="sidebar-link">IO</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>springboot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>dubbo</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>反射</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>大段</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">反射</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>大段</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>4/16/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>java</span></i></div></div> <div class="theme-reco-content content__default"><p>📺https://www.bilibili.com/video/BV1YA411T76k?share_source=copy_web</p> <h2 id="反射快速入门"><a href="#反射快速入门" class="header-anchor">#</a> 反射快速入门</h2> <p>根据配置文件<code>re.properties</code>指定信息, 创建<code>Cat</code>对象并调用方法<code>hi()</code></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">classfullpath</span><span class="token punctuation">=</span><span class="token attr-value">com.hspedu.Cat</span>
<span class="token attr-name">method</span><span class="token punctuation">=</span><span class="token attr-value">hi</span>
</code></pre></div><p>这样的需求在学习框架时特别多, 即通过外部文件配置, 在不修改源码情况下来控制程序, 也符合设计模式<code>ocp</code> (开闭原则: 对扩展开放, 对修改关闭)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//1.使用Peoperties类,可以读写配置文件</span>
<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;src\\re.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> classfullpath <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;classfullpath&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//com.hspedu.Cat</span>
<span class="token class-name">String</span> methodName <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;method&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hi</span>

<span class="token comment">//2.使用反射机制解决</span>
<span class="token comment">//(1)加载类,返回Class类型的对象cls</span>
<span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>classfullpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(2)通过cls得到加载类com.hspedu.Cat的对象实例</span>
<span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(3)通过cls得到加载类com.hspedu.Cat的methodName &quot;hi&quot; 的方法对象,即在反射中,可以把方法视为对象(万物皆对象)</span>
<span class="token class-name">Method</span> method1 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(4)通过method1调用方法:即通过方法对象来实现调用方法</span>
method1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="反射原理"><a href="#反射原理" class="header-anchor">#</a> 反射原理</h2> <ul><li><strong>Java Reflection</strong></li></ul> <ol><li>反射机制允许程序在执行期借助于<code>ReflectionAPI</code>取得任何类的内部信息 (比如: 成员变量, 构造器, 成员方法等), 并能操作对象的属性及方法, 反射在设计模式和框架底层都会用到</li> <li>加载完类之后, 在堆中就产生了一个<code>Class</code>类型的对象, 这个对象包含了类的完整结构信息, 通过这个对象得到类的结构, 这个<code>Class</code>对象就像一面镜子, 通过这个镜子看到类的结构, 所以形象称之为反射</li></ol> <ul><li><strong>原理图</strong></li></ul> <p><img src="F:/TyporePicture/image-20220311172504477.png" alt="image-20220311172504477"></p> <h2 id="反射机制"><a href="#反射机制" class="header-anchor">#</a> 反射机制</h2> <ul><li><strong><code>java</code>反射机制可以完成</strong></li></ul> <ol><li>在运行时判断任意一个对象所属的类</li> <li>在运行时构造任意一个类的对象</li> <li>在运行时得到任意一个类所具有的成员变量和方法</li> <li>在运行时调用任意一个对象的成员变量和方法</li> <li>生成动态代理</li></ol> <ul><li><strong>反射相关的主要类</strong></li></ul> <ol><li><code>java.lang.Class</code> : 代表一个类, <code>Class</code>对象表示某个类加载后在堆中的对象</li> <li><code>java.lang.reflect.Method</code> : 代表类的方法, <code>Method</code>对象表示某个类的方法</li> <li><code>java.lang.reflect.Field</code> : 代表类的成员变量, <code>Field</code>对象表示某个类的成员变量</li> <li><code>java.lang.reflect.Constructor</code> : 代表类的构造器, <code>Constructor</code>对象表示构造器</li></ol> <ul><li><strong>代码试一下</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//加载类,返回Class类型的对象cls</span>
<span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;classfullpath&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过cls得到加载类com.hspedu.Cat的对象实例</span>
<span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//(1)Method</span>
<span class="token class-name">Method</span> method1 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
method1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(2)Field</span>
<span class="token class-name">Field</span> nameField <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nameField<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(3)Constructor 无参 有参</span>
<span class="token class-name">Constructor</span> constructor1 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Constructor</span> constructor2 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="优缺点和优化"><a href="#优缺点和优化" class="header-anchor">#</a> 优缺点和优化</h2> <ul><li><strong>反射优点和缺点</strong></li></ul> <ol><li>优点: 可以动态的创建和使用对象 (也是框架底层核心), 使用灵活, 没有反射机制, 框架技术就失去底层支撑</li> <li>缺点: 使用反射基本是解释执行, 对执行速度有影响</li></ol> <ul><li><strong>传统方法来调用</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">90000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cat<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>反射机制调用方法</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Method</span> hi <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">90000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hi<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>反射调用优化-关闭访问检查</strong></li></ul> <ol><li><code>Method</code>和<code>Field</code>, <code>Constructor</code>对象都有<code>setAccessible()</code>方法</li> <li><code>setAccessible()</code>作用是启动和禁用访问安全检查的开关</li> <li>参数值为<code>true</code>表示反射的对象在使用时取消访问检查, 提高反射的效率, 参数值为<code>false</code>则表示反射的对象执行访问检查</li></ol> <ul><li><strong>反射机制调用方法-禁用访问安全检查的开关</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Method</span> hi <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    hi<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在反射调用方法时, 取消访问检查</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">90000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hi<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="class类分析"><a href="#class类分析" class="header-anchor">#</a> Class类分析</h2> <ul><li><strong><code>Class</code>接口继承图</strong></li></ul> <p><img src="F:/TyporePicture/image-20220311182231727.png" alt="image-20220311182231727"></p> <ul><li><strong>基本介绍</strong></li></ul> <ol><li><code>Class</code>也是类, 因此继承<code>Object</code>类</li> <li><code>Class</code>类对象不是<code>new</code>出来的, 而是系统创建的</li> <li>对于某个类的<code>Class</code>类对象, 在内存中只有一份, 因此类只加载一次</li> <li>每个类的实例都会记得自己是由哪个<code>Class</code>实例所生成</li> <li>通过<code>Class</code>可以完整地得到一个类的完整结构, 通过一系列<code>API</code></li> <li><code>Class</code>对象是存放在堆里的</li> <li>类的字节码二进制数据是放在方法区的, 有的地方成为类的元数据 (包括: 方法代码, 变量名, 方法名, 访问权限等)</li></ol> <ul><li><strong>一些代码来解释上面的某几条介绍</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//1.Class类对象不是new出来的, 而是系统创建的</span>
<span class="token comment">//(1)传统new对象</span>
<span class="token comment">/* ClassLoader类
   public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {
       return loadClass(name, false);
   }
*/</span>
<span class="token comment">//Cat cat = new Cat();</span>
<span class="token comment">//(2)反射方式,刚没debug到ClassLoader类的loadClass,原因是没有注销Cat cat = new Cat();</span>
<span class="token comment">/* ClassLoder类,仍然是通过ClassLoder类加载Cat类的Class对象
   public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {
       return loadClass(name, false);
   }
*/</span>
<span class="token class-name">Class</span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.对于某个类的Class类对象, 在内存中只有一份, 因此类只加载一次</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span>cls1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span>cls2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span>cls3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.Dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls1<span class="token punctuation">.</span><span class="token function">hasCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//和cls2.hasCode()一样</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">.</span><span class="token function">hasCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//和cls1.hasCode()一样</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">.</span><span class="token function">hasCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//和上面俩不一样</span>
</code></pre></div><ul><li><strong><code>Class</code>类的常用方法</strong></li></ul> <table><thead><tr><th>方法名</th> <th>功能说明</th></tr></thead> <tbody><tr><td><code>static Class forName(String name)</code></td> <td>返回指定类名name的Class对象</td></tr> <tr><td><code>Object newInstance()</code></td> <td>调用缺省构造函数, 返回该Class的一个实例</td></tr> <tr><td><code>getName()</code></td> <td>返回此Class对象所表示的实体名称 (类, 接口, 数组类, 基本类型等)</td></tr> <tr><td><code>Class getSuperClass()</code></td> <td>返回当前Class对象的父类的Class对象</td></tr> <tr><td><code>Class[] getInterfaces()</code></td> <td>获取当前Class对象的接口</td></tr> <tr><td><code>ClassLoder getClassLoder()</code></td> <td>返回该类的类加载器</td></tr> <tr><td><code>Class getSuperclass()</code></td> <td>返回表示此Class所表示的实体的超类的Class</td></tr> <tr><td><code>Constructor[] getConstructors()</code></td> <td>返回一个包含某些Constructor对象的数组</td></tr> <tr><td><code>Field[] getDeclaredFields()</code></td> <td>返回Field对象的一个数组</td></tr> <tr><td><code>Method getMethod(String name, Class...paramTypes)</code></td> <td>返回一个Method对象, 此对象形参类型为paramType</td></tr></tbody></table> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> car <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> brand <span class="token operator">=</span> <span class="token string">&quot;驴车&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> price <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> color <span class="token operator">=</span> <span class="token string">&quot;棕色&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">String</span> classAllPath <span class="token operator">=</span> <span class="token string">&quot;com.hspedu.Car&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//1.获取到Car类对应的Class对象</span>
<span class="token comment">//&lt;?&gt;表示不确定的java类型</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>classAllPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.输出cls</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//显示cls对象是哪个类的Class对象 com.hspedu.Car</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出cls运行类型 java.lang.Class</span>
<span class="token comment">//3.得到包名</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token function">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4.得到全类名</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>getName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5.通过cls创建对象实例</span>
<span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Car</span><span class="token punctuation">)</span>cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//car.toString()</span>
<span class="token comment">//6.通过反射获取属性brand</span>
<span class="token class-name">Field</span> brand <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brand<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//驴车</span>
<span class="token comment">//7.通过反射给属性赋值</span>
brand<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>car<span class="token punctuation">,</span> <span class="token string">&quot;宝马&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brand<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//宝马</span>
<span class="token comment">//8.希望可以得到所有的属性(字段)</span>
<span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> f <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="获取class类对象"><a href="#获取class类对象" class="header-anchor">#</a> 获取Class类对象</h2> <ul><li><strong>常用的四个</strong></li></ul> <ol><li><p>代码阶段/编译阶段 <code>Class.fornName</code></p> <p>前提: 已知一个类的全类名, 且该类在类路径下, 可通过<code>Class</code>类的静态方法<code>forName()</code>获取, 可能抛出<code>ClassNotFoundException</code></p> <p>应用场景: 多用于配置文件, 读取全路径, 加载类</p></li> <li><p><code>Class</code>类阶段/加载阶段 <code>类.class</code></p> <p>前提: 若已知具体的类, 通过类的<code>class</code>获取, 该方式最为安全可靠, 程序性能最高</p> <p>应用场景: 多用于参数传递, 比如通过反射得到对应构造器对象</p></li> <li><p><code>Runtime</code>运行阶段 <code>对象.getClass()</code></p> <p>前提: 已知某个类的实例, 调用该实例的<code>getClass()</code>方法获取<code>Class</code>对象</p> <p>应用场景: 通过创建好的对象获取<code>Class</code>对象</p></li> <li><p>类加载器 <code>类加载器获得Class对象</code></p></li></ol> <p>​		<code>ClassLoder cl = 对象.getClass().getClassLoader();</code></p> <p>​		<code>Class clazz = cl.loadClass(&quot;类的全类名&quot;)</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//1. Class.forName</span>
<span class="token class-name">String</span> classAllPath <span class="token operator">=</span> <span class="token string">&quot;com.hspedu.Car&quot;</span><span class="token punctuation">;</span> <span class="token comment">//通过读取配置文件获取</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> cls1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>classAllPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 类名.class</span>
<span class="token class-name">Class</span> cls2 <span class="token operator">=</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3. 对象.getClass()</span>
<span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> cls3 <span class="token operator">=</span> car<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls3<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4. 通过类加载器[4种]来获取到类的Class对象</span>
<span class="token comment">//(1)先得到类加载器car</span>
<span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> car<span class="token punctuation">.</span>getClass<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(2)通过类加载器得到Class对象</span>
<span class="token class-name">Class</span> cls4 <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>classAllPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls4<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//cls1, cls2, cls3, cls4 其实是同一个对象</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls1<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls3<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls4<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>特殊的两个</strong></li></ul> <ol><li><p>基本数据类型(<code>int</code>, <code>char</code>, <code>boolean</code>, <code>float</code>, <code>double</code>, <code>byte</code>, <code>long</code>, <code>short</code>) 按如下方式得到<code>Class</code>类</p> <p><code>Class cls = 基本数据类型.class</code></p></li> <li><p>基本数据类型对应的包装类, 可以通过<code>.TYPE</code>得到<code>Class</code>类对象</p> <p><code>Class cls = 包装类.TYPE</code></p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//5. 基本数据类型(int, char, boolean, float, double, byte, long, short) 按如下方式得到Class类</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerClass <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> characterClass <span class="token operator">=</span> <span class="token keyword">char</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> booleanClass <span class="token operator">=</span> <span class="token keyword">boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>integerClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//int</span>

<span class="token comment">//6.基本数据类型对应的包装类, 可以通过.TYPE得到Class类对象</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> type1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> type2 <span class="token operator">=</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//int</span>

<span class="token comment">//是同一个对象</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>integerClass<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type1<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="哪些类型有class对象"><a href="#哪些类型有class对象" class="header-anchor">#</a> 哪些类型有Class对象</h2> <ul><li><strong>如下类型有<code>Class</code>对象</strong></li></ul> <ol><li>外部类, 成员内部类, 静态内部类, 局部内部类, 匿名内部类</li> <li><code>interface</code>: 接口</li> <li>数组</li> <li><code>enum</code>: 枚举</li> <li><code>annotation</code>: 注解</li> <li>基本数据类型</li> <li><code>void</code></li></ol> <ul><li><strong>应用举例</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cls1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//外部类</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Serializable</span><span class="token punctuation">&gt;</span></span> cls2 <span class="token operator">=</span> <span class="token class-name">Serializable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//接口</span>
<span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> cls2 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//数组</span>
<span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> cls2 <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//二维数组</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Deprecated</span><span class="token punctuation">&gt;</span></span> cls2 <span class="token operator">=</span> <span class="token class-name">Deprecated</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//注解</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Thread<span class="token punctuation">.</span>State</span><span class="token punctuation">&gt;</span></span> cls2 <span class="token operator">=</span> <span class="token class-name">Thread<span class="token punctuation">.</span>State</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//枚举</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> cls2 <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//基本数据类型</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> cls2 <span class="token operator">=</span> <span class="token class-name">Void</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//void数据类型</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&gt;</span></span> cls2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span> <span class="token comment">//外部类</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class java.lang.String</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//interface java.io.Serializable</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class [Ljava.lang.Integer</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class [[F</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//interface java.lang.Deprecated</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls6<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class java.lang.Thread$State</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls7<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//long</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls8<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//void</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls9<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class java.lang.Class</span>
</code></pre></div><h2 id="动态和静态加载"><a href="#动态和静态加载" class="header-anchor">#</a> 动态和静态加载</h2> <ul><li><strong>基本说明</strong></li></ul> <p>​	反射机制是<code>Java</code>实现动态语言的关键, 也就是通过反射实现类动态加载</p> <ol><li>静态加载: 编译时加载相关的类, 如果没有则报错, 依赖性太强</li> <li>动态加载: 运行时加载需要的类, 如果运行时不用该类, 则不报错, 降低了依赖性</li></ol> <ul><li><strong>类加载时机</strong></li></ul> <ol><li>当创建对象时 (<code>new</code>) //静态加载</li> <li>当子类被加载时, 父类也加载 //静态加载</li> <li>调用类中的静态成员时 //静态加载</li> <li>通过反射 //动态加载</li></ol> <ul><li><strong>举例说明</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoad_</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> key <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">:</span>
                <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//静态加载</span>
                dog<span class="token punctuation">.</span><span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">&quot;2&quot;</span> <span class="token operator">:</span>
                <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//加载Person类[动态加载]</span>
                <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> m <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;do nothing..&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><h2 id="类加载流程图"><a href="#类加载流程图" class="header-anchor">#</a> 类加载流程图</h2> <ul><li><strong>类加载流程图</strong></li></ul> <p>​	验证 对文件进行安全校验</p> <p>​	准备 对静态变量分配内存并且默认初始化</p> <p>​	解析 虚拟机将常量池中的符号引用变为直接引用</p> <p><img src="F:/TyporePicture/image-20220312111956853.png" alt="image-20220312111956853"></p> <ul><li><strong>类加载各阶段完成任务</strong></li></ul> <p><img src="F:/TyporePicture/image-20220312112441500.png" alt="image-20220312112441500"></p> <h2 id="类加载五个阶段"><a href="#类加载五个阶段" class="header-anchor">#</a> 类加载五个阶段</h2> <ul><li><strong>加载阶段</strong></li></ul> <ol><li>JVM在该阶段的主要目的是将字节码从不同的数据源 (可能class群文件, 也可能是jar包, 甚至网络) 转化为二进制字节流加载到内存中, 并生成一个代表该类的java.lang.Class对象</li></ol> <ul><li><strong>连接阶段-验证</strong></li></ul> <ol><li>目的是为了确保Class文件的字节流中包含的信息符合当前虚拟机的要求, 并不会危害虚拟机自身的安全</li> <li>包括: 文件格式验证 (是否以魔数oxcafebabe开头), 元数据验证, 字节码验证和符号引用验证</li> <li>可以考虑使用-Xverify:none参数来关闭大部分的类验证措施, 缩短虚拟机类加载的时间</li></ol> <ul><li><strong>连接阶段-准备</strong></li></ul> <ol><li>JVM会在该阶段对静态变量, 分配内存并默认初始化 (对应数据类型的默认初始值, 如: 0, 0L, null, false等), 这些变量所使用的内存都将在方法区中进行分配</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
    <span class="token comment">//属性-成员变量-字段</span>
    <span class="token comment">//1. n1是实例属性,不是静态变量,因此在准备阶段,是不会分配内存的</span>
    <span class="token comment">//2. n2是静态变量,分配内存n2是默认初始化0,而不是20</span>
    <span class="token comment">//3. n3是static final,是常量,他和静态变量不一样,因为一旦赋值就不变n3=30</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> n3 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>连接阶段-解析</strong></li></ul> <ol><li>虚拟机将常量池内的符号引用替换为直接引用的过程</li></ol> <ul><li><strong>初始化</strong></li></ul> <ol><li>到初始化阶段, 才是真正开始执行类中定义的Java程序代码, 此阶段是执行<code>&lt;clinit&gt;()</code>方法的过程</li> <li><code>&lt;clinit&gt;()</code>方法是由编译器按语句在源文件中出现的顺序, 依次自动收集类中的所有静态变量的赋值动作和静态代码块中的语句, 并进行合并</li> <li>虚拟机会保证一个类的<code>&lt;clinit&gt;()</code>方法在多线程环境中被正确地加载, 同步. 如果多个线程同时去初始化一个类, 那么只会有一个线程去执行这个类<code>&lt;clinit&gt;()</code>方法, 其他线程都需要阻塞等待, 知道活动线程执行<code>&lt;clinit&gt;()</code>方法完毕</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoad</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mian</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.加载B类,并生成B的class类</span>
        <span class="token comment">//2.连接num=0</span>
        <span class="token comment">//3.初始化阶段</span>
        <span class="token comment">//  依次自动收集类中的所有静态变量的赋值动作和静态代码块中的语句,并合并</span>
        <span class="token comment">/*  client() {
        		System.out.println(&quot;B 静态代码块被执行&quot;);
        		//num = 300;
        		num = 100;
            }
            合并:num = 100;
        */</span>
        <span class="token comment">//4.&quot;B() 构造器被执行&quot;</span>
        <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//类加载↑, 没有这一条就没有4.这句输出</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//100</span>
        <span class="token comment">/*
        protected Class&lt;?&gt; loadClass(String name, boolean resolve)
        throws ClassNotFoundException
        {
        	//正因为有这个机制,才能保证某个类在内存中,只有一份Class对象
        	synchronized (getClassLoadingLock(name)) {
        		//...
        	}
        }
        */</span>
        <span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;B 静态代码块被执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        num <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;B() 构造器被执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="通过反射获取类的结构信息"><a href="#通过反射获取类的结构信息" class="header-anchor">#</a> 通过反射获取类的结构信息</h2> <ul><li><code>java.lang.Class</code>类</li></ul> <table><thead><tr><th>方法名</th> <th>功能说明</th></tr></thead> <tbody><tr><td><code>getName</code></td> <td>获取全类名</td></tr> <tr><td><code>getSimpleName</code></td> <td>获取简单类名</td></tr> <tr><td><code>getFields</code></td> <td>获取所有<code>public</code>修饰的属性, 包含本类以及父类的</td></tr> <tr><td><code>getDeclaredFields</code></td> <td>获取本类中所有属性</td></tr> <tr><td><code>getMethods</code></td> <td>获取所有<code>public</code>修饰的方法, 包含本类以及父类的</td></tr> <tr><td><code>getDeclaredMethods</code></td> <td>获取本类中的所有方法</td></tr> <tr><td><code>getConstructors</code></td> <td>获取所有<code>public</code>修饰的构造器, 包含本类的</td></tr> <tr><td><code>getDeclaredConstructors</code></td> <td>获取本类中的所有构造器</td></tr> <tr><td><code>getPackage</code></td> <td>形式返回包信息</td></tr> <tr><td><code>getSuperClass</code></td> <td>形式返回父类信息</td></tr> <tr><td><code>getInterfaces</code></td> <td>形式返回接口信息</td></tr> <tr><td><code>getAnnotations</code></td> <td>形式返回注解信息</td></tr></tbody></table> <ul><li><code>java.lang.reflect</code>类</li></ul> <table><thead><tr><th>方法名</th> <th>功能说明</th></tr></thead> <tbody><tr><td><code>getModifiers</code></td> <td>以<code>int</code>形式返回修饰符 [默认修饰符是0, <code>public</code>是1, <code>private</code>是2, <code>protected</code>是4, <code>static</code>是8, <code>final</code>是16]</td></tr> <tr><td><code>getType</code></td> <td>以<code>Class</code>形式返回类型</td></tr> <tr><td><code>getName</code></td> <td>返回属性名</td></tr></tbody></table> <ul><li><code>java.lang.reflect.Method</code>类</li></ul> <table><thead><tr><th>方法名</th> <th>功能说明</th></tr></thead> <tbody><tr><td><code>getModifiers</code></td> <td>以<code>int</code>形式返回修饰符 [默认修饰符是0, <code>public</code>是1, <code>private</code>是2, <code>protected</code>是4, <code>static</code>是8, <code>final</code>是16]</td></tr> <tr><td><code>getReturnType</code></td> <td>以<code>Class</code>形式获取返回类型</td></tr> <tr><td><code>getName</code></td> <td>返回方法名</td></tr> <tr><td><code>getParameterTypes</code></td> <td>以<code>Class[]</code>返回参数类型数组</td></tr></tbody></table> <ul><li><code>java.lang.reflect.Constructor</code>类</li></ul> <table><thead><tr><th>方法名</th> <th>功能说明</th></tr></thead> <tbody><tr><td><code>getModifiers</code></td> <td>以<code>int</code>形式返回修饰符</td></tr> <tr><td><code>getName</code></td> <td>返回构造器名 (全类名)</td></tr> <tr><td><code>getParameterTypes</code></td> <td>以<code>Class[]</code>返回参数类型数组</td></tr></tbody></table> <h2 id="反射爆破操作实例"><a href="#反射爆破操作实例" class="header-anchor">#</a> 反射爆破操作实例</h2> <ul><li><strong>方式一: 调用类中的<code>public</code>修饰的无参构造器</strong></li> <li><strong>方式二: 调用类中的指定构造器</strong></li> <li><strong><code>Class</code>类相关方法</strong></li></ul> <ol><li><code>newInstance</code>: 调用类中的无参构造器, 获取对应类的对象</li> <li><code>getConstructor(Class..clazz)</code>: 根据参数列表, 获取对应的<code>public</code>构造器对象</li> <li><code>getDecalaredConstructor(Class...clazz)</code>: 根据参数列表, 获取对应的所有构造器对象</li></ol> <ul><li><strong><code>Constructor</code>类相关方法</strong></li></ul> <ol><li><code>setAccessible</code>: 爆破</li> <li><code>newInstance(Object...obj</code>): 调用构造器</li></ol> <ul><li><strong>案例演示</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;一一&quot;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//无参 public</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//public的有参构造器</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//private的有参构造器</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//toString()</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectCreateInstance</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        
        <span class="token comment">//1.先获取到User类的Class对象</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> userClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.reflection.User&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//2.通过public的无参构造器创建实例</span>
        <span class="token class-name">Object</span> o <span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//3.通过public的有参构造器创建实例</span>
        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor <span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> hsp <span class="token operator">=</span>  constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">&quot;hsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//4.通过非public的有参构造器创建实例</span>
        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor1 <span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        constructor1<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//爆破[暴力破解],使用反射可以访问private的构造器/方法/属性</span>
        <span class="token class-name">Object</span> user2 <span class="token operator">=</span>  constructor1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&quot;hhh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="反射爆破操作属性"><a href="#反射爆破操作属性" class="header-anchor">#</a> 反射爆破操作属性</h2> <ul><li><p>根据属性名获取Field对象</p> <p><code>Field f = clazz对象.getDeclaredField(属性名);</code></p></li> <li><p>爆破</p> <p><code>f.setAccessible(true);</code></p></li> <li><p>访问</p> <p><code>f.set(o, 值);</code></p> <p><code>syso(f.get(o));</code></p></li> <li><p>注意: 如果是静态属性, 则<code>set</code>和<code>get</code>中的参数<code>o</code>可以写成<code>null</code></p></li> <li><p>代码演示</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectAccessProperty</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        
        <span class="token comment">//1.得到Student类对应的Class对象</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> stuClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.refkection.Student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//2.创建对象</span>
        <span class="token class-name">Object</span> o <span class="token operator">=</span> stuClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//o的运行类型就是Student</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Student</span>
        
        <span class="token comment">//3.使用反射得到age属性对象</span>
        <span class="token class-name">Field</span> age <span class="token operator">=</span> stuClass<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        age<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过反射来操作属性</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回age属性的值</span>
        
        <span class="token comment">//4.使用反射操作name属性</span>
        <span class="token class-name">Field</span> name <span class="token operator">=</span> stuClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//对name进行爆破,可以操作private属性</span>
        name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//name.set(o, &quot;老韩&quot;);</span>
        name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;老韩~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//因为name是static属性,因此o也可以写成null</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回属性值</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回属性值</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="反射爆破操作方法"><a href="#反射爆破操作方法" class="header-anchor">#</a> 反射爆破操作方法</h2> <ul><li><p>根据方法名和参数列表获取Method方法对象</p> <p><code>Method m = clazz.getDeclaredMethod(方法名, XX.class);</code></p></li> <li><p>获取对象</p> <p><code>Object o = clazz.newInstance();</code></p></li> <li><p>爆破</p> <p><code>m.setAccessible(true);</code></p></li> <li><p>访问</p> <p><code>Object returnValue = m.invoke(o, 实参列表);</code></p></li> <li><p>注意: 如果是静态方法, 则invoke的参数o可以写成null</p></li> <li><p>代码演示</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Boss</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Boss</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectAccessMethod</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        
        <span class="token comment">//1.得到Boss类对应的Class对象</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> bossCls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.hspedu.reflection.Boss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//2.创建对象</span>
        <span class="token class-name">Object</span> o <span class="token operator">=</span> bossCls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//3.调用public的hi方法</span>
        <span class="token comment">//Method hi = bossCls.getMethod(&quot;hi&quot;, String.class); //OK</span>
        <span class="token comment">//3.1得到hi方法对象</span>
        <span class="token class-name">Method</span> hi <span class="token operator">=</span> bossCls<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.2调用</span>
        hi<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span> <span class="token string">&quot;韩顺平教育~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//4.调用private static方法</span>
        <span class="token comment">//4.1得到say方法对象</span>
        <span class="token class-name">Method</span> say <span class="token operator">-</span> bossCls<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;say&quot;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">,</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.2因为say方法是private, 所以需要爆破</span>
        say<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>say<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.3因为say方法是static的,还可以这样调用,可以传入null</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>say<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;是我&quot;</span><span class="token punctuation">,</span> <span class="token string">'不知'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//5.在反射中,如果方法有返回值,统一返回Object,但是它运行类型和方法定义的返回类型一致</span>
        <span class="token class-name">Object</span> reVal <span class="token operator">=</span> say<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&quot;是你&quot;</span><span class="token punctuation">,</span> <span class="token string">'阿'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;reVal的运行类型-&gt;&quot;</span> <span class="token operator">+</span> reVal<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//String</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/myPages/myNote/01java/02-Coll.html" class="prev">
            集合
          </a></span> <span class="next"><a href="/myPages/myNote/01java/01-io.html">
            IO
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#反射快速入门" class="sidebar-link reco-side-反射快速入门" data-v-70334359>反射快速入门</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#反射原理" class="sidebar-link reco-side-反射原理" data-v-70334359>反射原理</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#反射机制" class="sidebar-link reco-side-反射机制" data-v-70334359>反射机制</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#优缺点和优化" class="sidebar-link reco-side-优缺点和优化" data-v-70334359>优缺点和优化</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#class类分析" class="sidebar-link reco-side-class类分析" data-v-70334359>Class类分析</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#获取class类对象" class="sidebar-link reco-side-获取class类对象" data-v-70334359>获取Class类对象</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#哪些类型有class对象" class="sidebar-link reco-side-哪些类型有class对象" data-v-70334359>哪些类型有Class对象</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#动态和静态加载" class="sidebar-link reco-side-动态和静态加载" data-v-70334359>动态和静态加载</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#类加载流程图" class="sidebar-link reco-side-类加载流程图" data-v-70334359>类加载流程图</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#类加载五个阶段" class="sidebar-link reco-side-类加载五个阶段" data-v-70334359>类加载五个阶段</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#通过反射获取类的结构信息" class="sidebar-link reco-side-通过反射获取类的结构信息" data-v-70334359>通过反射获取类的结构信息</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#反射爆破操作实例" class="sidebar-link reco-side-反射爆破操作实例" data-v-70334359>反射爆破操作实例</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#反射爆破操作属性" class="sidebar-link reco-side-反射爆破操作属性" data-v-70334359>反射爆破操作属性</a></li><li class="level-2" data-v-70334359><a href="/myPages/myNote/01java/03-Ref.html#反射爆破操作方法" class="sidebar-link reco-side-反射爆破操作方法" data-v-70334359>反射爆破操作方法</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 大段的小站
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:20px;bottom:-20px;opacity:1;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div></div></div>
    <script src="/assets/js/app.23e0e97d.js" defer></script><script src="/assets/js/3.4591a7e0.js" defer></script><script src="/assets/js/1.d6c07a46.js" defer></script><script src="/assets/js/97.67316cf8.js" defer></script>
  </body>
</html>
